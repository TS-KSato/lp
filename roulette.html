<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ - é‹è©¦ã—ã‚’ã—ã‚ˆã†ï¼</title>
    <style>
        /* ===== åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« ===== */
        :root {
            --primary-color: #ff3e3e;
            --secondary-color: #2c3e50;
            --accent-color: #f1c40f;
            --text-light: #ecf0f1;
            --text-dark: #2c3e50;
            --background-light: #ffffff;
            --background-dark: #1a1a1a;
            --success-color: #2ecc71;
            --nav-height: 60px;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é«˜ã•ã‚’å¤‰æ•°åŒ– */
            --transition-default: 0.3s ease;
            /* å…±é€šãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html {
            /* ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’CSSã§å®Ÿç¾ */
            scroll-padding-top: var(--nav-height);
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å…ˆã®ä½ç½®èª¿æ•´ */
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
            /* ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ™‚ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        /* --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ --- */
        .hidden {
            display: none;
            /* JSã§è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ */
        }

        /* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
        header {
            background: linear-gradient(135deg, var(--primary-color), #ff7675);
            color: white;
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* ===== ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
        nav {
            background-color: var(--secondary-color);
            padding: 0 1rem;
            /* å·¦å³ã®padding */
            height: var(--nav-height);
            /* é«˜ã•ã‚’å¤‰æ•°ã§æŒ‡å®š */
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã«è¿½å¾“ */
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            line-height: var(--nav-height);
            /* ãƒªãƒ³ã‚¯ã‚’å‚ç›´ä¸­å¤®æƒãˆ */
            padding: 0 0.5rem;
            /* ãƒ›ãƒãƒ¼ã‚¨ãƒªã‚¢èª¿æ•´ */
        }

        .nav-links a:hover,
        .nav-links a:focus {
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
            color: var(--accent-color);
            outline: none;
            /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’æ¶ˆã™å ´åˆ */
            text-decoration: underline;
            /* ä»£ã‚ã‚Šã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º */
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.5rem;
            /* ã‚µã‚¤ã‚ºèª¿æ•´ */
            padding: 0.5rem;
            /* ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢ç¢ºä¿ */
            border-radius: 50%;
            /* ä¸¸ãã™ã‚‹ */
            transition: background-color 0.2s;
        }

        .theme-toggle:hover,
        .theme-toggle:focus {
            background-color: rgba(255, 255, 255, 0.1);
            /* ãƒ›ãƒãƒ¼/ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®èƒŒæ™¯ */
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚° */
        }


        /* ===== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ===== */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: transform var(--transition-default), background-color var(--transition-default), box-shadow var(--transition-default);
            box-shadow: 0 4px 8px rgba(255, 62, 62, 0.3);
            border: 2px solid transparent;
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ç”¨ */
        }

        .cta-button:hover {
            transform: translateY(-3px);
            background-color: #ff5252;
            box-shadow: 0 6px 12px rgba(255, 62, 62, 0.4);
        }

        .cta-button:focus {
            outline: none;
            border-color: var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚° */
            box-shadow: 0 0 0 3px rgba(241, 196, 15, 0.5);
            /* å¤–å´ã®å½± */
        }

        /* ===== ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .roulette-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .roulette-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 2rem auto;
        }

        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid var(--secondary-color);
            /* å¢ƒç•Œç·šã‚’è¿½åŠ  */
            background: conic-gradient(from 0deg,
                    var(--primary-color) 0deg 45deg,
                    var(--accent-color) 45deg 90deg,
                    var(--success-color) 90deg 135deg,
                    #3498db 135deg 180deg,
                    #9b59b6 180deg 225deg,
                    #1abc9c 225deg 270deg,
                    #e67e22 270deg 315deg,
                    #e74c3c 315deg 360deg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotate(0deg);
            /* åˆæœŸè§’åº¦ */
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ’ãƒ³ãƒˆ (å¿…è¦ãªå ´åˆã®ã¿) */
            /* will-change: transform; */
            transition: transform 0s linear;
            /* JSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«åˆæœŸtransitionã‚’ç„¡åŠ¹åŒ– */
        }

        /* ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (å¿…è¦ãªå ´åˆã®ã¿) */
        .roulette-wheel,
        .testimonial-container {
            transform: translateZ(0);
            /* will-change: transform; */
            /* éå‰°ãªwill-changeã¯é¿ã‘ã‚‹ */
        }


        /* çµµæŸ„ã‚’é…ç½®ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆJavaScriptã§å‹•çš„ã«è¿½åŠ ï¼‰ */
        .segment-label {
            position: absolute;
            top: 50%;
            left: 50%;
            font-size: 1.6rem;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            pointer-events: none;
            background: rgba(0, 0, 0, 0);
            padding: 3px 6px;
            border-radius: 5px;
            user-select: none;
        }

        .roulette-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: var(--background-light);
            border: 3px solid var(--secondary-color);
            border-radius: 50%;
            z-index: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .roulette-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 50px;
            background-color: var(--secondary-color);
            clip-path: polygon(0% 0%, 100% 0%, 50% 100%);
            z-index: 2;
            filter: drop-shadow(0px -2px 2px rgba(0, 0, 0, 0.4));
        }

        .controls {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            width: 100%;
            max-width: 400px;
        }

        .image-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 1rem;
        }

        /* divã‹ã‚‰buttonã«å¤‰æ›´ */
        .image-option {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
            transition: transform 0.2s, border-color 0.2s, background-color 0.2s;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            /* å°‘ã—å¤§ãã */
            color: var(--text-dark);
            /* ãƒ†ã‚­ã‚¹ãƒˆè‰²æŒ‡å®š */
            padding: 0;
            /* buttonãƒ‡ãƒ•ã‚©ãƒ«ãƒˆpaddingå‰Šé™¤ */
            font-family: inherit;
            /* ãƒ•ã‚©ãƒ³ãƒˆç¶™æ‰¿ */
            -webkit-tap-highlight-color: transparent;
            /* ã‚¹ãƒãƒ›ã§ã®ã‚¿ãƒƒãƒ—æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã™ */
        }

        .image-option:hover,
        .image-option:focus {
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
            transform: scale(1.05);
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ */
            outline-offset: 2px;
        }

        .image-option.selected {
            border-color: var(--primary-color);
            background-color: #ffeaea;
            /* é¸æŠæ™‚ã®èƒŒæ™¯è‰² */
            transform: scale(1.05);
            outline: none;
            /* é¸æŠæ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ä¸è¦ */
        }

        /* é¸æŠã•ã‚Œã¦ã„ã‚‹ãƒœã‚¿ãƒ³ã® aria-checked å±æ€§ã‚’è€ƒæ…® */
        .image-option[aria-checked="true"] {
            /* radioãªã®ã§aria-pressedã§ã¯ãªãaria-checked */
            border-color: var(--primary-color);
            background-color: #ffeaea;
        }

        .spin-button {
            background-color: var(--primary-color);
            color: white;
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s, opacity 0.3s;
        }

        .spin-button:hover:not(:disabled) {
            transform: scale(1.02);
            background-color: #ff5252;
        }

        .spin-button:focus:not(:disabled) {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }

        .spin-button:disabled {
            background-color: #ccc;
            color: #666;
            /* Disabledæ™‚ã®æ–‡å­—è‰² */
            cursor: not-allowed;
            transform: none;
            opacity: 0.7;
        }

        .result {
            margin-top: 1.5rem;
            padding: 1.5rem;
            /* å°‘ã—åºƒã‚ã« */
            border-radius: 8px;
            background-color: #f0f0f0;
            text-align: center;
            min-height: 80px;
            /* å°‘ã—é«˜ã */
            width: 100%;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ  */
            transition: opacity 0.5s ease-out, visibility 0s linear 0.5s, transform 0.5s ease-out;
            /* visibilityã®transitionå¤‰æ›´ */
            border: 1px solid #ddd;
        }

        .result.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            transition-delay: 0s;
            /* è¡¨ç¤ºæ™‚ã¯é…å»¶ãªã— */
        }

        .result h3 {
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
            font-size: 1.4rem;
            /* çµæœã‚’å¤§ãã */
        }

        .result p {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            /* æ®µè½é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .result .win {
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.2rem;
            /* å½“é¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼·èª¿ */
        }

        .result .lose {
            color: var(--primary-color);
        }

        /* ===== ç‰¹å¾´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            /* minmaxèª¿æ•´ */
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, opacity 0.6s ease-out;
            opacity: 0;
            /* Intersection Observerç”¨ åˆæœŸçŠ¶æ…‹ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ åˆæœŸçŠ¶æ…‹ */
        }

        .feature-card.visible {
            /* Intersection Observerç”¨ è¡¨ç¤ºçŠ¶æ…‹ */
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card:hover {
            transform: translateY(-5px) scale(1.02);
            /* Yæ–¹å‘ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è¿½åŠ  */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .feature-card h3 {
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }

        /* ===== ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .testimonials {
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .testimonials h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .testimonial-slider {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 10px;
            /* Sliderå…¨ä½“ã«è§’ä¸¸ */
            background-color: #f9f9f9;
            /* èƒŒæ™¯è‰²çµ±ä¸€ */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .testimonial-container {
            display: flex;
            /* JSã§transitionã‚’è¨­å®šã™ã‚‹ãŸã‚CSSã‹ã‚‰ã¯å‰Šé™¤ */
            /* transition: transform 0.5s ease; */
        }

        .testimonial {
            min-width: 100%;
            padding: 2.5rem;
            /* Paddingèª¿æ•´ */
            flex-shrink: 0;
            /* ã‚¹ãƒ©ã‚¤ãƒ‰æ™‚ã«ç¸®ã¾ãªã„ã‚ˆã†ã« */
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .testimonial.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        .testimonial-content {
            margin-bottom: 1.5rem;
            font-style: italic;
            font-size: 1.1rem;
            /* å°‘ã—å¤§ãã */
            position: relative;
        }

        .testimonial-content::before {
            /* å¼•ç”¨ç¬¦ */
            content: 'â€œ';
            font-size: 3rem;
            /* å¤§ãã */
            color: var(--primary-color);
            opacity: 0.3;
            /* å°‘ã—è–„ã */
            position: absolute;
            top: -0.5rem;
            left: -1rem;
        }

        .testimonial-author {
            font-weight: bold;
            color: var(--primary-color);
            text-align: right;
            /* å³å¯„ã› */
        }

        .testimonial-author::before {
            content: 'â€” ';
        }

        .slider-controls {
            display: flex;
            justify-content: center;
            margin-top: 1.5rem;
            padding-bottom: 1.5rem;
            /* ä¸‹éƒ¨ã«ã‚¹ãƒšãƒ¼ã‚¹ */
            gap: 1rem;
        }

        .slider-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            width: 45px;
            /* å°‘ã—å¤§ãã */
            height: 45px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            font-size: 1.2rem;
            /* ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºèª¿æ•´ */
        }

        .slider-btn:hover:not(:disabled) {
            background-color: var(--primary-color);
            transform: scale(1.1);
        }

        .slider-btn:focus {
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
            outline-offset: 2px;
        }

        .slider-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== FAQ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .faq {
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .faq h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .accordion {
            list-style: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .accordion-item {
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            background-color: #f9f9f9;
            /* èƒŒæ™¯è‰²ã‚’è¿½åŠ  */
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, background-color 0.3s;
        }

        .accordion-item.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’buttonã«å¤‰æ›´ */
        .accordion-header {
            background-color: transparent;
            /* Itemå´ã§æŒ‡å®šã™ã‚‹ãŸã‚é€æ˜ã« */
            padding: 1.2rem 1.5rem;
            /* Paddingèª¿æ•´ */
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s;
            border: none;
            /* buttonè¦ç´ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆborderã‚’å‰Šé™¤ */
            width: 100%;
            /* buttonè¦ç´ ã®å¹…ã‚’100%ã« */
            text-align: left;
            /* buttonè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å·¦æƒãˆã« */
            font-size: 1.1rem;
            /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
            font-weight: 500;
            /* ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆèª¿æ•´ */
            color: var(--text-dark);
            /* ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ©ãƒ¼ */
        }

        .accordion-header:hover,
        .accordion-header:focus {
            background-color: #ebebeb;
            outline: none;
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯è¦ªè¦ç´ ã§ç®¡ç† */
        }

        /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’itemã«é©ç”¨ */
        .accordion-item:focus-within {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }


        .accordion-content {
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            /* paddingã‚‚ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å¯¾è±¡ã« */
            padding: 0 1.5rem;
            /* é–‹é–‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã®æ¨ªpadding */
            visibility: hidden;
            /* é–‰ã˜ãŸçŠ¶æ…‹ã§éè¡¨ç¤º */
        }

        .accordion-content-inner {
            padding: 0;
            /* åˆæœŸçŠ¶æ…‹ã§ã¯paddingãªã— */
            border-top: 1px solid #eee;
            /* åŒºåˆ‡ã‚Šç·š */
            transition: padding 0.4s ease-out;
            /* innerã®paddingã‚‚ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        .accordion-item.active .accordion-header {
            background-color: var(--secondary-color);
            color: white;
        }

        .accordion-item.active .accordion-header:hover {
            background-color: var(--secondary-color);
            /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã¯ãƒ›ãƒãƒ¼è‰²ã‚’å¤‰ãˆãªã„ */
        }

        .accordion-item.active .accordion-header .accordion-icon {
            transform: rotate(45deg);
            /* ã‚¢ã‚¤ã‚³ãƒ³ã‚’å›è»¢ */
        }

        .accordion-item.active .accordion-content {
            max-height: 400px;
            /* ååˆ†ãªé«˜ã•ã‚’ç¢ºä¿ (å¿…è¦ãªã‚‰JSã§å‹•çš„ã«èª¿æ•´) */
            visibility: visible;
            /* é–‹ã„ãŸçŠ¶æ…‹ã§è¡¨ç¤º */
            padding: 0 1.5rem;
            /* æ¨ªpaddingã¯ç¶­æŒ */
        }

        /* é–‹ã„ãŸçŠ¶æ…‹ã®å†…éƒ¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
        .accordion-item.active .accordion-content-inner {
            padding: 1.5rem 0;
            /* ä¸Šä¸‹ã®paddingã‚’è¨­å®š */
        }

        .accordion-icon {
            font-size: 1.5rem;
            font-weight: bold;
            transition: transform 0.3s ease-out;
            /* ã‚¢ã‚¤ã‚³ãƒ³ã®å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
            flex-shrink: 0;
            /* ã‚¢ã‚¤ã‚³ãƒ³ãŒç¸®ã¾ãªã„ã‚ˆã†ã« */
            margin-left: 1rem;
            /* ãƒ†ã‚­ã‚¹ãƒˆã¨ã®é–“éš” */
        }


        /* ===== CTA ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .cta-section {
            text-align: center;
            padding: 3rem;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 3rem;
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, background-color 0.3s;
        }

        .cta-section.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }


        .cta-section h2 {
            margin-bottom: 1.5rem;
            color: var(--secondary-color);
            font-size: 1.8rem;
            /* å°‘ã—å¤§ãã */
        }

        .cta-section p {
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== Admin Panel ===== */
        .admin-panel {
            margin: 3rem auto;
            padding: 2rem;
            max-width: 800px;
            background-color: #eee;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: opacity 0.3s ease, transform 0.3s ease;
            /* è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        .admin-panel.hidden {
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            /* éè¡¨ç¤ºæ™‚ã¯æ“ä½œä¸å¯ã« */
            /* display: none ã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç«¶åˆã™ã‚‹ãŸã‚ã€opacityã¨transformã§åˆ¶å¾¡ */
            /* å¿…è¦ãªã‚‰ height: 0; overflow: hidden; ã‚‚è¿½åŠ  */
        }

        .admin-panel h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .weight-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .weight-control {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            background: #fff;
            padding: 1rem;
            border-radius: 6px;
        }

        .weight-control label {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .weight-control input[type="number"] {
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 60px;
            /* å¹…ã‚’å›ºå®š */
            text-align: right;
        }

        .probability {
            font-size: 0.9rem;
            color: #555;
            margin-left: auto;
            /* å³å¯„ã› */
            padding-left: 10px;
            /* å·¦ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .admin-panel .admin-button {
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 1rem;
        }

        .admin-panel .admin-button:hover {
            background-color: #ff5252;
        }

        .admin-panel .admin-button#reset-weights {
            background-color: var(--secondary-color);
        }

        .admin-panel .admin-button#reset-weights:hover {
            background-color: #34495e;
        }


        /* ===== ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ ===== */
        @media (max-width: 768px) {
            :root {
                --nav-height: 50px;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ãƒŠãƒ“é«˜ã•ã‚’èª¿æ•´ */
            }

            .nav-links {
                /* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœªå®Ÿè£…ã®ãŸã‚éè¡¨ç¤ºã®ã¾ã¾ (å¿…è¦ãªã‚‰å®Ÿè£…) */
                display: none;
                /* ä¾‹:
                position: absolute;
                top: var(--nav-height);
                left: 0;
                width: 100%;
                background-color: var(--secondary-color);
                flex-direction: column;
                align-items: center;
                padding: 1rem 0;
                transform: translateY(-100%);
                transition: transform 0.3s ease-out;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                */
            }

            /*
            .nav-links.open {
                transform: translateY(0);
            }
            .mobile-menu-btn {
                display: block; / * ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³è¡¨ç¤º * /
                background: none;
                border: none;
                color: var(--text-light);
                font-size: 1.8rem;
                cursor: pointer;
            }
            */


            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .roulette-container {
                width: clamp(220px, 80vw, 280px);
                /* ã‚µã‚¤ã‚ºã‚’ç”»é¢å¹…ã«å¿œã˜ã¦èª¿æ•´ */
                height: clamp(220px, 80vw, 280px);
            }

            .roulette-pointer {
                top: -20px;
                width: 25px;
                height: 40px;
            }

            .segment-label {
                font-size: 1.3rem;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å°‘ã—å°ã•ã */
                padding: 2px 4px;
            }


            .feature-card {
                padding: 1.5rem;
            }

            .image-options {
                grid-template-columns: repeat(4, 1fr);
                /* 4åˆ—ã®ã¾ã¾ */
                gap: 8px;
            }

            .image-option {
                font-size: 1.5rem;
            }

            .testimonial {
                padding: 2rem 1.5rem;
                /* å·¦å³ã®paddingã‚’å°‘ã—ç‹­ã */
            }

            .testimonial-content::before {
                /* å¼•ç”¨ç¬¦ã®ä½ç½®èª¿æ•´ */
                left: -0.5rem;
            }

            .accordion-header {
                padding: 1rem 1.2rem;
                font-size: 1rem;
            }

            .accordion-item.active .accordion-content-inner {
                padding: 1rem 0;
            }

            .weight-controls {
                grid-template-columns: 1fr;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯1åˆ— */
            }
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .dark-mode {
            --background-light: var(--background-dark);
            --text-dark: var(--text-light);
            --secondary-color-dark: #34495e;
            /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã®ä¸­é–“è‰² */
            --background-medium-dark: #2d3436;
            /* ã‚«ãƒ¼ãƒ‰ãªã©ã®èƒŒæ™¯ */
            --border-dark: #4b6177;
            /* ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
        }

        .dark-mode body {
            background-color: var(--background-dark);
            color: var(--text-light);
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã®èƒŒæ™¯è‰²èª¿æ•´ */
        .dark-mode .feature-card,
        .dark-mode .accordion-item,
        .dark-mode .testimonial-slider,
        .dark-mode .result,
        .dark-mode .cta-section,
        .dark-mode .image-option {
            background-color: var(--background-medium-dark);
            color: var(--text-light);
            border-color: var(--border-dark);
            /* ãƒœãƒ¼ãƒ€ãƒ¼è‰²èª¿æ•´ */
        }

        .dark-mode .image-option.selected,
        .dark-mode .image-option[aria-checked="true"] {
            background-color: #4a3030;
            /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰é¸æŠæ™‚ */
            border-color: var(--primary-color);
        }

        .dark-mode .accordion-header {
            background-color: transparent;
            /* itemå´ã§æŒ‡å®š */
            color: var(--text-light);
        }

        .dark-mode .accordion-header:hover,
        .dark-mode .accordion-header:focus {
            background-color: #4a5a6a;
        }

        .dark-mode .accordion-item.active .accordion-header {
            background-color: var(--primary-color);
            /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã®è‰²ã‚’æ˜ã‚‹ã */
            color: white;
        }

        .dark-mode .accordion-item.active .accordion-header:hover {
            background-color: var(--primary-color);
        }

        .dark-mode .accordion-content {
            background-color: var(--secondary-color-dark);
            /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èƒŒæ™¯ã‚’å°‘ã—æ˜ã‚‹ã */
            color: var(--text-light);
        }

        .dark-mode .accordion-content-inner {
            border-top-color: var(--border-dark);
        }

        .dark-mode .roulette-center {
            background-color: var(--background-medium-dark);
            border-color: #7f8c8d;
        }

        .dark-mode .roulette-wheel {
            border-color: #7f8c8d;
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç¾çŠ¶ç¶­æŒ */

        .dark-mode .result {
            border-color: var(--border-dark);
        }

        .dark-mode .cta-section {
            background-color: var(--background-medium-dark);
        }

        .dark-mode .nav-links a:hover,
        .dark-mode .nav-links a:focus {
            color: var(--accent-color);
        }

        .dark-mode .slider-btn {
            background-color: #4a5a6a;
        }

        .dark-mode .slider-btn:hover:not(:disabled) {
            background-color: var(--primary-color);
        }

        .dark-mode .admin-panel {
            background-color: var(--secondary-color-dark);
            border-color: var(--border-dark);
        }

        .dark-mode .weight-control {
            background-color: var(--background-medium-dark);
            border-color: var(--border-dark);
        }

        .dark-mode .weight-control input[type="number"] {
            background-color: var(--background-dark);
            color: var(--text-light);
            border-color: var(--border-dark);
        }

        .dark-mode .probability {
            color: var(--text-light);
            opacity: 0.8;
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ */
        .dark-mode::-webkit-scrollbar {
            width: 10px;
        }

        .dark-mode::-webkit-scrollbar-track {
            background: var(--secondary-color);
        }

        .dark-mode::-webkit-scrollbar-thumb {
            background: #566573;
            border-radius: 5px;
        }

        .dark-mode::-webkit-scrollbar-thumb:hover {
            background: #7f8c8d;
        }
    </style>
</head>

<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="logo">ğŸ² ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</div>
        <div class="tagline">é‹å‘½ã®è¼ªã‚’å›ã—ã¦ã€å¹¸é‹ã‚’ã¤ã‹ã¿å–ã‚ã†ï¼</div>
    </header>

    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav>
        <div class="nav-links">
            <a href="#home">ãƒ›ãƒ¼ãƒ </a>
            <a href="#play-now">ãƒ—ãƒ¬ã‚¤</a>
            <a href="#about">ç‰¹å¾´</a>
            <a href="#faq">FAQ</a>
            <a href="#testimonials">ãŠå®¢æ§˜ã®å£°</a>
            <!-- Admin Panel Toggle Link: roleã¨aria-expandedã‚’è¿½åŠ  -->
            <a href="#admin-panel-link" id="admin-panel-toggle-link" role="button" aria-expanded="false">ç®¡ç†</a>
        </div>
        <div><!-- å³å¯„ã›ã®ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠ -->
            <button class="theme-toggle" id="theme-toggle" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ">ğŸŒ™</button>
            <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ (æœªå®Ÿè£…) -->
            <!-- <button class="mobile-menu-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-expanded="false">â˜°</button> -->
        </div>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main>
        <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="hero" id="home">
            <h1>é‹å‘½ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã§ã‚ãªãŸã®é‹è©¦ã—</h1>
            <p>ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã§ã¯ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã™æ©Ÿä¼šã‚’æä¾›ã—ã¾ã™ã€‚ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’å›ã—ã¦ã€æ§˜ã€…ãªè³å“ã‚„ç‰¹å…¸ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ï¼ä»Šã™ãå‚åŠ ã—ã¦ã€ã‚ãªãŸã®å¹¸é‹ã‚’ç¢ºã‹ã‚ã‚ˆã†ã€‚</p>
            <a href="#play-now" class="cta-button">ä»Šã™ããƒ—ãƒ¬ã‚¤</a>
        </section>

        <!-- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="roulette-section" id="play-now">
            <h2>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ãã†</h2>
            <div class="roulette-container">
                <div class="roulette-wheel" id="roulette-wheel">
                    <!-- çµµæŸ„ãƒ©ãƒ™ãƒ«ã¯JSã§å‹•çš„ã«è¿½åŠ  -->
                    <div class="roulette-center"></div>
                </div>
                <div class="roulette-pointer"></div>
            </div>
            <div class="controls">
                <p id="select-prompt">å¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§ãã ã•ã„ (8ç¨®é¡)</p>
                <div class="image-options" id="image-options" role="radiogroup" aria-labelledby="select-prompt">
                    <!-- ãƒœã‚¿ãƒ³ã«å¤‰æ›´ã—ã€role="radio", aria-checked, aria-labelã‚’è¿½åŠ  -->
                    <button class="image-option" role="radio" aria-checked="false" data-value="0"
                        aria-label="ãƒã‚§ãƒªãƒ¼ã‚’é¸æŠ">ğŸ’</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="1"
                        aria-label="ãƒ¬ãƒ¢ãƒ³ã‚’é¸æŠ">ğŸ‹</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="2"
                        aria-label="ã‚ªãƒ¬ãƒ³ã‚¸ã‚’é¸æŠ">ğŸŠ</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="3"
                        aria-label="ã¶ã©ã†ã‚’é¸æŠ">ğŸ‡</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="4"
                        aria-label="ãƒªãƒ³ã‚´ã‚’é¸æŠ">ğŸ</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="5"
                        aria-label="ã‚¹ã‚¤ã‚«ã‚’é¸æŠ">ğŸ‰</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="6"
                        aria-label="ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚’é¸æŠ">ğŸ’</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="7"
                        aria-label="æ˜Ÿã‚’é¸æŠ">ğŸŒŸ</button>
                </div>
                <button id="spin-button" class="spin-button" disabled>ã‚¹ãƒ”ãƒ³ï¼</button>
                <div class="result" id="result" aria-live="polite"></div> <!-- aria-liveè¿½åŠ  -->
            </div>
        </section>

        <!-- ç‰¹å¾´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="features" id="about">
            <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
            <div class="feature-card target">
                <div class="feature-icon">ğŸ¯</div>
                <h3>ã‚·ãƒ³ãƒ—ãƒ«ãªæ“ä½œ</h3>
                <p>8ç¨®é¡ã®çµµæŸ„ã‹ã‚‰å¥½ããªã‚‚ã®ã‚’é¸ã³ã€ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã ã‘ã€‚ç›´æ„Ÿçš„ãªæ“ä½œã§ã©ãªãŸã§ã‚‚ç°¡å˜ã«æ¥½ã—ã‚ã¾ã™ã€‚</p>
            </div>
            <div class="feature-card target">
                <div class="feature-icon">ğŸ†</div>
                <h3>è±ªè¯è³å“</h3>
                <p>å½“é¸è€…ã«ã¯ã€è±ªè¯ãªè³å“ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚é‹ãŒè‰¯ã‘ã‚Œã°ã€ç´ æ™´ã‚‰ã—ã„è³å“ã‚’ã‚²ãƒƒãƒˆã§ãã‚‹ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆâ€»å½“ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã¯å®Ÿéš›ã®è³å“æä¾›ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰</p>
            </div>
            <div class="feature-card target">
                <div class="feature-icon">ğŸ”„</div>
                <h3>ä½•åº¦ã§ã‚‚æŒ‘æˆ¦å¯èƒ½</h3>
                <p>ä¸€åº¦ã®æŒ‘æˆ¦ã§é‹ãŒæ‚ªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚ä½•åº¦ã§ã‚‚ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¦ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
            </div>
        </section>

        <!-- ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="testimonials" id="testimonials">
            <h2>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å£°</h2>
            <div class="testimonial-slider">
                <div class="testimonial-container" id="testimonial-container">
                    <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œåˆã‚ã¦ãƒ—ãƒ¬ã‚¤ã—ãŸã¨ãã¯åŠä¿¡åŠç–‘ã§ã—ãŸãŒã€ãªã‚“ã¨å¤§å½“ãŸã‚Šï¼æœ¬å½“ã«ç´ æ™´ã‚‰ã—ã„ä½“é¨“ã§ã—ãŸã€‚ã¾ãŸæŒ‘æˆ¦ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã€
                        </div>
                        <div class="testimonial-author">ç”°ä¸­ å¥å¤ª</div>
                    </div>
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œã“ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚²ãƒ¼ãƒ ã®é¢ç™½ã•ã«ãƒãƒã£ã¦ã„ã¾ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªã®ã«å¥¥ãŒæ·±ãã€æ¯å›ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¾ã™ã€‚å‹é”ã«ã‚‚å‹§ã‚ã¾ã—ãŸï¼ã€
                        </div>
                        <div class="testimonial-author">ä½è—¤ ç¾å’²</div>
                    </div>
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œè³å“ã®è³ªãŒé«˜ãã€å½“ãŸã£ãŸæ™‚ã®å–œã³ã¯è¨€è‘‰ã§ã¯è¡¨ã›ã¾ã›ã‚“ã€‚ã‚µã‚¤ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚ä½¿ã„ã‚„ã™ãã€ã¨ã¦ã‚‚æº€è¶³ã—ã¦ã„ã¾ã™ã€‚ã€
                        </div>
                        <div class="testimonial-author">éˆ´æœ¨ å¤§è¼”</div>
                    </div>
                </div>
            </div>
            <div class="slider-controls">
                <!-- aria-labelè¿½åŠ  -->
                <button class="slider-btn prev-btn" id="prev-testimonial" aria-label="å‰ã® testimonials ã‚’è¡¨ç¤º">â—€</button>
                <button class="slider-btn next-btn" id="next-testimonial" aria-label="æ¬¡ã® testimonials ã‚’è¡¨ç¤º">â–¶</button>
            </div>
        </section>

        <!-- FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="faq" id="faq">
            <h2>ã‚ˆãã‚ã‚‹è³ªå•</h2>
            <ul class="accordion" id="faq-accordion">
                <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
                <!-- å„ã‚¢ã‚¤ãƒ†ãƒ ã«IDã€ãƒ˜ãƒƒãƒ€ãƒ¼ãƒœã‚¿ãƒ³ã« aria-controls, aria-expandedã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã« role="region", aria-labelledby ã‚’è¿½åŠ  -->
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-1" aria-controls="faq-content-1"
                        aria-expanded="false">
                        <span>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®éŠã³æ–¹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-1" role="region" aria-labelledby="faq-header-1">
                        <div class="accordion-content-inner">
                            ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®éŠã³æ–¹ã¯ç°¡å˜ã§ã™ã€‚ä¸‹ã«ã‚ã‚‹8ç¨®é¡ã®çµµæŸ„ã‹ã‚‰å¥½ããªã‚‚ã®ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸ã³ã¾ã™ã€‚æ¬¡ã«ã€Œã‚¹ãƒ”ãƒ³ï¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¾ã™ã€‚ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒåœæ­¢ã—ã€çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚ãªãŸã®é¸ã‚“ã çµµæŸ„ã§åœæ­¢ã™ã‚Œã°å½“ãŸã‚Šã§ã™ã€‚
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-2" aria-controls="faq-content-2"
                        aria-expanded="false">
                        <span>è³å“ã¯ã©ã®ã‚ˆã†ã«å—ã‘å–ã‚Œã¾ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-2" role="region" aria-labelledby="faq-header-2">
                        <div class="accordion-content-inner">
                            è³å“ã®å—ã‘å–ã‚Šæ–¹æ³•ã¯å½“é¸æ™‚ã«ãƒ¡ãƒ¼ãƒ«ã§ã”æ¡ˆå†…ã—ã¾ã™ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«è³å“ã®å ´åˆã¯ãƒ¡ãƒ¼ãƒ«ã§é€ä»˜ã•ã‚Œã€ç‰©ç†çš„ãªè³å“ã®å ´åˆã¯é…é€å…ˆä½æ‰€ã®ç¢ºèªå¾Œã«ç™ºé€ã•ã‚Œã¾ã™ã€‚å½“é¸å¾Œ7æ—¥ä»¥å†…ã«æ‰‹ç¶šãã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚
                            (â€»å½“ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã¯å®Ÿéš›ã®è³å“æä¾›ã¯ã‚ã‚Šã¾ã›ã‚“)
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-3" aria-controls="faq-content-3"
                        aria-expanded="false">
                        <span>ä½•å›ãƒ—ãƒ¬ã‚¤ã§ãã¾ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-3" role="region" aria-labelledby="faq-header-3">
                        <div class="accordion-content-inner">
                            åŸºæœ¬çš„ã«ã¯ä½•å›ã§ã‚‚ãƒ—ãƒ¬ã‚¤ã„ãŸã ã‘ã¾ã™ã€‚ã‚¹ãƒ”ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ã€ã¾ãŸå¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€ç‰¹å®šã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æœŸé–“ä¸­ã¯1æ—¥ã®å›æ•°åˆ¶é™ãŒè¨­ã‘ã‚‰ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-4" aria-controls="faq-content-4"
                        aria-expanded="false">
                        <span>å½“é¸ç¢ºç‡ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-4" role="region" aria-labelledby="faq-header-4">
                        <div class="accordion-content-inner">
                            ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå„çµµæŸ„ã§åœæ­¢ã™ã‚‹ç¢ºç‡ã¯ã€ç®¡ç†ãƒ‘ãƒãƒ«ã§è¨­å®šã•ã‚ŒãŸé‡ã¿ã«åŸºã¥ã„ã¦æ±ºå®šã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å„çµµæŸ„ã®å½“é¸ç¢ºç‡ã¯ç­‰ã—ã 1/8 (12.5%)
                            ã§ã™ãŒã€è¨­å®šã«ã‚ˆã£ã¦å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚ãªãŸã®é¸ã‚“ã çµµæŸ„ã§åœæ­¢ã™ã‚Œã°å½“ãŸã‚Šã¨ãªã‚Šã¾ã™ã€‚
                        </div>
                    </div>
                </li>
            </ul>
        </section>

        <!-- CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="cta-section target" id="cta">
            <h2>ä»Šã™ãé‹å‘½ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã«æŒ‘æˆ¦ã—ã‚ˆã†ï¼</h2>
            <p>é‹ãŒè‰¯ã‘ã‚Œã°ã€ç´ æ™´ã‚‰ã—ã„è³å“ãŒã‚²ãƒƒãƒˆã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»Šã™ããƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¦ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
            <a href="#play-now" class="cta-button">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™</a>
        </section>

        <!-- Admin Panel (æœ€åˆã¯éè¡¨ç¤º) -->
        <section class="admin-panel hidden" id="admin-panel" aria-labelledby="admin-panel-heading">
            <h2 id="admin-panel-heading">ç¢ºç‡è¨­å®šãƒ‘ãƒãƒ«</h2>
            <div class="weight-controls" id="weight-controls">
                <!-- Generated dynamically in JS -->
            </div>
            <button id="save-weights" class="admin-button">è¨­å®šã‚’ä¿å­˜</button>
            <button id="reset-weights" class="admin-button">ãƒªã‚»ãƒƒãƒˆ</button>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">â€» è¨­å®šã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
        </section>
    </main>

    <!-- JavaScript -->
    <script>
        "use strict"; // Strictãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–

        // å³æ™‚å®Ÿè¡Œé–¢æ•°å¼ (IIFE) ã‚’ä½¿ç”¨ã—ã¦ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®æ±šæŸ“ã‚’é˜²ã
        (() => {
            // --- å®šæ•°å®šç¾© ---
            const SPIN_DURATION_SECONDS = 4; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®å›è»¢æ™‚é–“ï¼ˆç§’ï¼‰
            const BASE_ROTATION_DEGREES = 360 * 5; // æœ€ä½å›è»¢æ•°ï¼ˆåº¦ï¼‰
            const NUM_OPTIONS = 8; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®é¸æŠè‚¢ã®æ•°
            const SEGMENT_ANGLE = 360 / NUM_OPTIONS; // 1ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚ãŸã‚Šã®è§’åº¦
            const TESTIMONIAL_SLIDE_DURATION = 500; // ms
            const ACCORDION_ANIMATION_DURATION = 400; // ms
            const DEFAULT_WEIGHT = 1; // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é‡ã¿
            const ADMIN_PANEL_STORAGE_KEY = 'rouletteWeights'; // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚­ãƒ¼
            const INTERSECTION_OBSERVER_OPTIONS = {
                root: null, // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚’åŸºæº–ã«ã™ã‚‹
                rootMargin: '0px',
                threshold: 0.1 // 10%è¡¨ç¤ºã•ã‚ŒãŸã‚‰ãƒˆãƒªã‚¬ãƒ¼
            };

            // --- DOMè¦ç´ ã®å–å¾— ---
            const themeToggle = document.getElementById('theme-toggle');
            const spinButton = document.getElementById('spin-button');
            const rouletteWheel = document.getElementById('roulette-wheel');
            const resultElement = document.getElementById('result');
            const imageOptionsContainer = document.getElementById('image-options');
            // NodeListã‚’Arrayã«å¤‰æ›ã—ã¦ãŠãã¨ä¾¿åˆ©ãªå ´åˆãŒã‚ã‚‹
            const imageOptionButtons = Array.from(imageOptionsContainer.querySelectorAll('.image-option'));
            const prevTestimonialBtn = document.getElementById('prev-testimonial');
            const nextTestimonialBtn = document.getElementById('next-testimonial');
            const testimonialContainer = document.getElementById('testimonial-container');
            const faqAccordion = document.getElementById('faq-accordion'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨
            const adminPanelToggleLink = document.getElementById('admin-panel-toggle-link');
            const adminPanel = document.getElementById('admin-panel');
            const weightControlsContainer = document.getElementById('weight-controls');
            const saveWeightsBtn = document.getElementById('save-weights'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨
            const resetWeightsBtn = document.getElementById('reset-weights'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨

            // --- çŠ¶æ…‹å¤‰æ•° ---
            let selectedOptionIndex = null; // é¸æŠã•ã‚ŒãŸçµµæŸ„ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (0-7)
            let isSpinning = false; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå›è»¢ä¸­ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°
            let currentTestimonial = 0; // ç¾åœ¨è¡¨ç¤ºä¸­ã®ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
            let isSliding = false; // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã‹
            let currentRotation = 0; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®ç¾åœ¨ã®è§’åº¦ã‚’ä¿æŒ

            // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
            const options = ['ğŸ’', 'ğŸ‹', 'ğŸŠ', 'ğŸ‡', 'ğŸ', 'ğŸ‰', 'ğŸ’', 'ğŸŒŸ'];

            // --- ç¢ºç‡é‡ã¿ã‚·ã‚¹ãƒ†ãƒ  ---
            let optionWeights = options.map(() => DEFAULT_WEIGHT); // å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®é‡ã¿é…åˆ—
            let totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0); // é‡ã¿ã®åˆè¨ˆ

            // --- åˆæœŸåŒ–å‡¦ç† ---
            function initialize() {
                loadWeightsFromStorage(); // ä¿å­˜ã•ã‚ŒãŸé‡ã¿ã‚’èª­ã¿è¾¼ã¿ (Adminãƒ‘ãƒãƒ«åˆæœŸåŒ–ã‚ˆã‚Šå…ˆã«)
                setupEventListeners();
                setupRouletteLabels();
                updateTestimonialSlider(true); // åˆæœŸè¡¨ç¤ºï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ï¼‰
                checkInitialTheme();
                setupIntersectionObserver(); // Intersection Observerã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
                initializeAdminPanel(); // Adminãƒ‘ãƒãƒ«ã®åˆæœŸåŒ–
                spinButton.disabled = true; // åˆæœŸçŠ¶æ…‹ã§ã¯ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                updateAriaChecked(null); // åˆæœŸçŠ¶æ…‹ã®aria-checkedã‚’è¨­å®š
                // åˆæœŸè§’åº¦ã‚’CSSã‹ã‚‰å–å¾—ã—ã¦ä¿æŒï¼ˆã‚ˆã‚Šæ­£ç¢ºãªé–‹å§‹ã®ãŸã‚ï¼‰
                currentRotation = getCurrentRotation(rouletteWheel);
                rouletteWheel.style.transform = `rotate(${currentRotation}deg)`; // JSã§ç®¡ç†
            }

            // --- ã‚»ã‚­ãƒ¥ã‚¢ãªä¹±æ•°ç”Ÿæˆ ---
            function getSecureRandomNumber(min, max) {
                if (window.crypto && window.crypto.getRandomValues) {
                    try {
                        const randomBuffer = new Uint32Array(1);
                        window.crypto.getRandomValues(randomBuffer);
                        const randomNumber = min + (randomBuffer[0] / (0xFFFFFFFF + 1)) * (max - min);
                        return Math.floor(randomNumber);
                    } catch (error) {
                        console.error("Crypto API random number generation failed:", error);
                        return fallbackRandom(min, max);
                    }
                } else {
                    console.warn("Crypto API not available, falling back to Math.random (less secure).");
                    return fallbackRandom(min, max);
                }
            }
            function fallbackRandom(min, max) {
                return Math.floor(Math.random() * (max - min)) + min;
            }


            // --- é‡ã¿ä»˜ãç¢ºç‡è¨ˆç®— ---
            function updateOptionWeight(index, weight) {
                if (index >= 0 && index < optionWeights.length && typeof weight === 'number' && weight >= 0) {
                    optionWeights[index] = weight;
                    totalWeight = optionWeights.reduce((sum, currentWeight) => sum + currentWeight, 0);
                } else {
                    console.error(`Invalid weight update: index=${index}, weight=${weight}`);
                }
            }

            function getWeightedRandomIndex() {
                if (totalWeight <= 0) {
                    console.warn("Total weight is zero or negative, returning unweighted random index.");
                    return getSecureRandomNumber(0, NUM_OPTIONS); // é‡ã¿ãŒãªã„å ´åˆã¯å‡ç­‰ç¢ºç‡
                }

                const randomValue = getSecureRandomNumber(0, Math.floor(totalWeight * 1000)) / 1000; // ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ç²¾åº¦å‘ä¸Š
                let weightSum = 0;

                for (let i = 0; i < optionWeights.length; i++) {
                    weightSum += optionWeights[i];
                    if (randomValue < weightSum) {
                        return i;
                    }
                }
                // é€šå¸¸ã¯åˆ°é”ã—ãªã„ãŒã€æµ®å‹•å°æ•°ç‚¹èª¤å·®ãªã©ã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                console.warn("Weighted random index calculation fallback triggered.");
                return optionWeights.length - 1;
            }

            // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š (ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã‚’æ´»ç”¨) ---
            function setupEventListeners() {
                document.addEventListener('click', handleDocumentClick);
                // Adminãƒ‘ãƒãƒ«å†…ã®å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã¯å§”ä»»ã§å‡¦ç†
                weightControlsContainer.addEventListener('input', handleWeightInputChange);
                // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã®å‡¦ç† (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
                // window.addEventListener('resize', handleResize);
            }

            // Documentå…¨ä½“ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
            function handleDocumentClick(event) {
                const target = event.target;

                // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
                if (target.closest('#theme-toggle')) {
                    toggleTheme();
                    return;
                }

                // ç”»åƒé¸æŠãƒœã‚¿ãƒ³ (imageOptionsContainerå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                const imageOptionBtn = target.closest('.image-option');
                if (imageOptionsContainer.contains(imageOptionBtn)) {
                    handleImageOptionClick(imageOptionBtn);
                    return;
                }

                // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³
                if (target === spinButton) {
                    spinRoulette();
                    return;
                }

                // ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ« å‰ã¸/æ¬¡ã¸ ãƒœã‚¿ãƒ³
                if (target === prevTestimonialBtn) {
                    showPrevTestimonial();
                    return;
                }
                if (target === nextTestimonialBtn) {
                    showNextTestimonial();
                    return;
                }

                // FAQ ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ (faqAccordionå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                const faqHeader = target.closest('.accordion-header');
                if (faqAccordion.contains(faqHeader)) {
                    handleFaqClick(faqHeader);
                    return;
                }

                // Adminãƒ‘ãƒãƒ«è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒªãƒ³ã‚¯
                if (target === adminPanelToggleLink) {
                    event.preventDefault(); // <a>ã‚¿ã‚°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    toggleAdminPanel();
                    return;
                }

                // Adminãƒ‘ãƒãƒ« ä¿å­˜/ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ (adminPanelå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                if (adminPanel.contains(target)) {
                    if (target === saveWeightsBtn) {
                        saveWeightsToStorage();
                        alert('ç¢ºç‡è¨­å®šãŒä¿å­˜ã•ã‚Œã¾ã—ãŸã€‚'); // TODO: ã‚ˆã‚Šè‰¯ã„é€šçŸ¥æ–¹æ³•
                        return;
                    }
                    if (target === resetWeightsBtn) {
                        resetWeights();
                        return;
                    }
                }
            }

            // --- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé–¢é€£ ---
            function setupRouletteLabels() {
                const fragment = document.createDocumentFragment();
                // getComputedStyleã‚ˆã‚ŠoffsetWidthã®æ–¹ãŒãƒªãƒ•ãƒ­ãƒ¼ãŒå°‘ãªã„å ´åˆãŒã‚ã‚‹
                const wheelSize = rouletteWheel.offsetWidth;
                // ä¸­å¿ƒã‹ã‚‰ã®è·é›¢ã‚’èª¿æ•´ã—ã¦ãƒ©ãƒ™ãƒ«ãŒé‡ãªã‚‰ãªã„ã‚ˆã†ã«
                const radius = wheelSize * 0.35; // å°‘ã—å†…å´ã«èª¿æ•´
                const degToRad = Math.PI / 180;

                for (let i = 0; i < options.length; i++) {
                    // å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®ä¸­å¤®è§’åº¦
                    const angle = (SEGMENT_ANGLE * i) + (SEGMENT_ANGLE / 2);
                    const angleRad = (angle - 90) * degToRad; // CSSã®rotateã¯0åº¦ãŒä¸Šã ãŒã€ä¸‰è§’é–¢æ•°ã¯å³ãŒ0åº¦ã®ãŸã‚èª¿æ•´

                    const label = document.createElement('div');
                    label.classList.add('segment-label');
                    label.textContent = options[i];

                    // ä½ç½®è¨ˆç®—: translateã§ä¸­å¿ƒã‹ã‚‰ç§»å‹•ã—ã€rotateã§ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«åˆã‚ã›ã‚‹
                    const x = radius * Math.cos(angleRad);
                    const y = radius * Math.sin(angleRad);

                    // transform: translateã§ä¸­å¿ƒã‹ã‚‰ãšã‚‰ã—ã€rotateã§æ–‡å­—ã®å‘ãã‚’èª¿æ•´
                    // translate(-50%, -50%) ã§è¦ç´ è‡ªä½“ã®ä¸­å¿ƒã‚’åŸºæº–ç‚¹ã«ã™ã‚‹
                    label.style.transform = `translate(${x}px, ${y}px) translate(-50%, -50%) rotate(${angle + 90}deg)`;

                    fragment.appendChild(label);
                }
                rouletteWheel.appendChild(fragment);
            }

            function updateAriaChecked(selectedIndex) {
                imageOptionButtons.forEach((btn, index) => {
                    const isSelected = index === selectedIndex;
                    btn.setAttribute('aria-checked', String(isSelected)); // "true" or "false"
                    btn.classList.toggle('selected', isSelected);
                });
            }

            function handleImageOptionClick(clickedButton) {
                if (isSpinning) return;

                const clickedIndex = parseInt(clickedButton.dataset.value, 10);
                if (isNaN(clickedIndex) || clickedIndex < 0 || clickedIndex >= NUM_OPTIONS) {
                    console.error('Invalid option index:', clickedButton.dataset.value);
                    return;
                }

                // æ—¢ã«é¸æŠã•ã‚Œã¦ã„ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ä½•ã‚‚ã—ãªã„
                if (selectedOptionIndex === clickedIndex) return;

                selectedOptionIndex = clickedIndex;
                updateAriaChecked(selectedOptionIndex);
                spinButton.disabled = false;
                resultElement.classList.remove('show'); // å‰å›ã®çµæœã‚’éš ã™
            }

            function spinRoulette() {
                if (isSpinning || selectedOptionIndex === null) {
                    return;
                }

                isSpinning = true;
                spinButton.disabled = true;
                resultElement.classList.remove('show');
                imageOptionButtons.forEach(btn => btn.disabled = true); // é¸æŠè‚¢ã‚‚ç„¡åŠ¹åŒ–

                const winningIndex = getWeightedRandomIndex();

                // ç›®æ¨™è§’åº¦: ãƒã‚¤ãƒ³ã‚¿ãƒ¼(ä¸Šéƒ¨)ã«å½“é¸ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®ä¸­å¿ƒãŒæ¥ã‚‹è§’åº¦
                // winningIndex=0 -> 22.5åº¦, winningIndex=1 -> 67.5åº¦ ...
                // å›è»¢æ–¹å‘ã¯æ™‚è¨ˆå›ã‚Š(ãƒ—ãƒ©ã‚¹æ–¹å‘)ãªã®ã§ã€ 360 - (ç›®æ¨™è§’åº¦) + (è£œæ­£)
                // ãƒã‚¤ãƒ³ã‚¿ãƒ¼ä½ç½®(0åº¦)ã«ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®ä¸­å¿ƒ(SEGMENT_ANGLE / 2)ãŒæ¥ã‚‹ã‚ˆã†ã«èª¿æ•´
                const targetSegmentCenter = winningIndex * SEGMENT_ANGLE + SEGMENT_ANGLE / 2;
                let targetAngle = 360 - targetSegmentCenter;

                // è‡ªç„¶ã«è¦‹ãˆã‚‹ã‚ˆã†ã«å°‘ã—ãƒ©ãƒ³ãƒ€ãƒ ãªã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’è¿½åŠ 
                // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå¹…ã®Â±45%ç¨‹åº¦ã®ç¯„å›²ã§ãšã‚‰ã™
                const randomOffset = (getSecureRandomNumber(0, SEGMENT_ANGLE * 900) / 1000) - (SEGMENT_ANGLE * 0.45);
                targetAngle += randomOffset;

                // ç¾åœ¨ã®è§’åº¦ã‹ã‚‰ã®å·®åˆ†ã‚’è¨ˆç®—ã—ã€æœ€ä½å›è»¢æ•°ã‚’åŠ ãˆã‚‹
                // currentRotationã‹ã‚‰ã®å·®åˆ† + BASE_ROTATION_DEGREES + targetAngleãŒæœ€çµ‚è§’åº¦
                // normalizeAngleã§ç¾åœ¨ã®è§’åº¦ã‚’0-360ã«æ­£è¦åŒ–
                const normalizedCurrentRotation = normalizeAngle(currentRotation);
                const finalAngle = BASE_ROTATION_DEGREES + targetAngle;

                // CSS Transitionã‚’ä½¿ã†æ–¹æ³• (ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã€ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ã¯CSSã§å®šç¾©)
                // rouletteWheel.style.transition = `transform ${SPIN_DURATION_SECONDS}s cubic-bezier(0.33, 1, 0.68, 1)`; // easeOutCubicç›¸å½“
                // rouletteWheel.style.transform = `rotate(${finalAngle}deg)`;
                // currentRotation = finalAngle; // æœ€çµ‚è§’åº¦ã‚’ä¿æŒ

                // // transitionendã‚¤ãƒ™ãƒ³ãƒˆã§å®Œäº†ã‚’æ¤œå‡º
                // rouletteWheel.addEventListener('transitionend', onSpinComplete, { once: true });

                // function onSpinComplete() {
                //     displayResult(winningIndex);
                //     isSpinning = false;
                //     imageOptionButtons.forEach(btn => btn.disabled = false);
                //     rouletteWheel.style.transition = 'none'; // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã¯transitionã‚’è§£é™¤
                // }

                // requestAnimationFrame ã‚’ä½¿ã†æ–¹æ³• (ã‚ˆã‚Šç´°ã‹ã„åˆ¶å¾¡ãŒå¯èƒ½)
                const startTime = performance.now();
                const duration = SPIN_DURATION_SECONDS * 1000;
                const startAngle = currentRotation; // å‰å›ã®æœ€çµ‚è§’åº¦ã‚’é–‹å§‹è§’åº¦ã¨ã™ã‚‹
                const angleChange = finalAngle - startAngle; // ãƒˆãƒ¼ã‚¿ãƒ«ã®å›è»¢é‡

                function animate(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1); // 0ã‹ã‚‰1ã®é€²è¡Œåº¦
                    const easedProgress = easeOutCubic(progress); // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é©ç”¨
                    const currentAngle = startAngle + (angleChange * easedProgress);

                    rouletteWheel.style.transform = `rotate(${currentAngle}deg)`;

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†
                        rouletteWheel.style.transform = `rotate(${finalAngle}deg)`; // æœ€çµ‚è§’åº¦ã‚’æ­£ç¢ºã«è¨­å®š
                        currentRotation = finalAngle; // æœ€çµ‚è§’åº¦ã‚’ä¿æŒ
                        displayResult(winningIndex);
                        isSpinning = false;
                        imageOptionButtons.forEach(btn => btn.disabled = false);
                    }
                }
                requestAnimationFrame(animate);
            }


            // Helper functions for spinRoulette
            function getCurrentRotation(element) {
                // transform ã‚¹ã‚¿ã‚¤ãƒ«ã‹ã‚‰ç¾åœ¨ã®å›è»¢è§’åº¦ã‚’å–å¾—
                const style = window.getComputedStyle(element);
                const transform = style.transform;
                if (transform && transform !== 'none') {
                    // 'matrix(a, b, c, d, e, f)' ã¾ãŸã¯ 'rotate(deg)'
                    const matrixMatch = transform.match(/^matrix\((.+)\)$/);
                    if (matrixMatch) {
                        const values = matrixMatch[1].split(', ').map(parseFloat);
                        // atan2(b, a) ã§è§’åº¦ï¼ˆãƒ©ã‚¸ã‚¢ãƒ³ï¼‰ã‚’å–å¾—ã—ã€åº¦ã«å¤‰æ›
                        let angle = Math.round(Math.atan2(values[1], values[0]) * (180 / Math.PI));
                        return angle < 0 ? angle + 360 : angle; // 0-359åº¦ã®ç¯„å›²ã«æ­£è¦åŒ–
                    }
                    const rotateMatch = transform.match(/^rotate\((.+)deg\)$/);
                    if (rotateMatch) {
                        return parseFloat(rotateMatch[1]);
                    }
                }
                return 0; // transformãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯0åº¦
            }

            // è§’åº¦ã‚’ 0 <= angle < 360 ã®ç¯„å›²ã«æ­£è¦åŒ–
            function normalizeAngle(angle) {
                return ((angle % 360) + 360) % 360;
            }

            function easeOutCubic(t) {
                return 1 - Math.pow(1 - t, 4); // easeOutQuart (ã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºã‹ã‚‚)
                // return (--t)*t*t+1; // easeOutCubic
            }

            function displayResult(winningIndex) {
                const winningSymbol = options[winningIndex];
                const selectedSymbol = options[selectedOptionIndex];
                const win = winningIndex === selectedOptionIndex;

                resultElement.innerHTML = `
                    <h3>çµæœ: ${winningSymbol}</h3>
                    <p class="${win ? 'win' : 'lose'}">
                        ${win ? `ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã€Œ${selectedSymbol}ã€ãŒå½“ãŸã‚Šã¾ã—ãŸï¼` : `æ®‹å¿µã€ã€Œ${selectedSymbol}ã€ã¯ã¯ãšã‚Œã§ã™ã€‚çµæœã¯ã€Œ${winningSymbol}ã€ã§ã—ãŸã€‚`}
                    </p>
                    ${!win ? '<p>ã‚‚ã†ä¸€åº¦å¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>' : '<p>ç´ æ™´ã‚‰ã—ã„é‹ã§ã™ã­ï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¾ã™ã‹ï¼Ÿ</p>'}
                `;
                resultElement.classList.add('show');

                // æ¬¡ã®ã‚¹ãƒ”ãƒ³ã«å‚™ãˆã‚‹
                selectedOptionIndex = null;
                updateAriaChecked(null); // é¸æŠçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
                spinButton.disabled = true; // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            }

            // --- ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ ---
            function toggleTheme() {
                const isDarkMode = document.body.classList.toggle('dark-mode');
                themeToggle.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
                themeToggle.setAttribute('aria-label', isDarkMode ? 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ' : 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            }

            function checkInitialTheme() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                // ä¿å­˜ã•ã‚ŒãŸè¨­å®š > OSè¨­å®š > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ(light) ã®å„ªå…ˆé †ä½
                const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');

                if (initialTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeToggle.textContent = 'â˜€ï¸';
                    themeToggle.setAttribute('aria-label', 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                } else {
                    document.body.classList.remove('dark-mode');
                    themeToggle.textContent = 'ğŸŒ™';
                    themeToggle.setAttribute('aria-label', 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                }
            }

            // --- ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ ---
            const testimonials = testimonialContainer.querySelectorAll('.testimonial');
            const testimonialCount = testimonials.length;

            function showNextTestimonial() {
                if (isSliding || testimonialCount <= 1) return;
                isSliding = true;
                currentTestimonial = (currentTestimonial + 1) % testimonialCount;
                updateTestimonialSlider();
                setTimeout(() => { isSliding = false; }, TESTIMONIAL_SLIDE_DURATION);
            }

            function showPrevTestimonial() {
                if (isSliding || testimonialCount <= 1) return;
                isSliding = true;
                currentTestimonial = (currentTestimonial - 1 + testimonialCount) % testimonialCount;
                updateTestimonialSlider();
                setTimeout(() => { isSliding = false; }, TESTIMONIAL_SLIDE_DURATION);
            }

            function updateTestimonialSlider(isInitial = false) {
                const containerWidth = testimonialContainer.offsetWidth; // éƒ½åº¦å–å¾—ã§ãƒªã‚µã‚¤ã‚ºã«å¯¾å¿œ
                const offset = -currentTestimonial * containerWidth;

                // ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ (åˆå›ä»¥å¤–)
                testimonialContainer.style.transition = isInitial ? 'none' : `transform ${TESTIMONIAL_SLIDE_DURATION}ms ease`;
                // ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœŸå¾…ã—ã¦ transform3d ã‚’ä½¿ç”¨
                testimonialContainer.style.transform = `translate3d(${offset}px, 0, 0)`;

                // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–° (æœ€åˆ/æœ€å¾Œã§ç„¡åŠ¹åŒ–)
                prevTestimonialBtn.disabled = currentTestimonial === 0;
                nextTestimonialBtn.disabled = currentTestimonial === testimonialCount - 1;
            }


            // --- FAQã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ ---
            function handleFaqClick(header) {
                const item = header.parentElement;
                const content = header.nextElementSibling; // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„éƒ¨åˆ†
                const icon = header.querySelector('.accordion-icon');
                const isOpening = !item.classList.contains('active');

                // ä»–ã®é–‹ã„ã¦ã„ã‚‹é …ç›®ã‚’é–‰ã˜ã‚‹ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
                // if (isOpening) {
                //     faqAccordion.querySelectorAll('.accordion-item.active').forEach(openItem => {
                //         if (openItem !== item) {
                //             closeAccordionItem(openItem);
                //         }
                //     });
                // }

                // ã‚¯ãƒ©ã‚¹ã¨ARIAå±æ€§ã‚’ãƒˆã‚°ãƒ«
                item.classList.toggle('active');
                header.setAttribute('aria-expanded', String(isOpening));
                icon.textContent = isOpening ? 'âˆ’' : '+'; // ã‚¢ã‚¤ã‚³ãƒ³å¤‰æ›´

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                if (isOpening) {
                    openAccordionContent(content);
                } else {
                    closeAccordionContent(content);
                }
            }

            function openAccordionContent(content) {
                const contentInner = content.querySelector('.accordion-content-inner');
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹å‰ã«é«˜ã•ã‚’è¨ˆç®—ã§ãã‚‹ã‚ˆã†ã«æº–å‚™
                content.style.visibility = 'hidden'; // ä¸€ç¬éš ã™
                content.style.maxHeight = 'none'; // é«˜ã•ã‚’ä¸€æ—¦è§£é™¤
                content.style.padding = '0 1.5rem'; // æ¨ªãƒ‘ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š

                // å®Ÿéš›ã®é«˜ã•ã‚’å–å¾—
                const height = contentInner.offsetHeight +
                    parseFloat(getComputedStyle(contentInner).paddingTop) +
                    parseFloat(getComputedStyle(contentInner).paddingBottom);

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹çŠ¶æ…‹ã«æˆ»ã™
                content.style.maxHeight = '0px';
                content.style.visibility = 'visible'; // å†è¡¨ç¤º

                // requestAnimationFrameã§æ¬¡ã®æç”»ãƒ•ãƒ¬ãƒ¼ãƒ ã§é«˜ã•ã‚’è¨­å®š
                requestAnimationFrame(() => {
                    content.style.maxHeight = `${height}px`;
                    contentInner.style.padding = '1.5rem 0'; // å†…å´ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’é©ç”¨
                });

                // ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«é«˜ã•å›ºå®šã‚’è§£é™¤ (ä»»æ„)
                setTimeout(() => {
                    // é–‹ã„ãŸã¾ã¾ãªã‚‰maxHeightã‚’è§£é™¤ã—ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¤‰æ›´ã«å¯¾å¿œ
                    if (content.parentElement.classList.contains('active')) {
                        content.style.maxHeight = 'none';
                    }
                }, ACCORDION_ANIMATION_DURATION);
            }

            function closeAccordionContent(content) {
                const contentInner = content.querySelector('.accordion-content-inner');
                const height = content.scrollHeight; // ç¾åœ¨ã®é«˜ã•ã‚’å–å¾—

                // ç¾åœ¨ã®é«˜ã•ã‹ã‚‰0ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã‚‹
                content.style.maxHeight = `${height}px`; // ç¾åœ¨ã®é«˜ã•ã‚’æ˜ç¤ºçš„ã«è¨­å®š
                contentInner.style.padding = '1.5rem 0'; // paddingã‚‚å…ƒã«æˆ»ã™

                requestAnimationFrame(() => {
                    content.style.maxHeight = '0px';
                    contentInner.style.padding = '0'; // paddingã‚’0ã«
                });

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«éè¡¨ç¤ºã«ã™ã‚‹ (ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ visibility ã‚‚ä½¿ã†)
                setTimeout(() => {
                    if (!content.parentElement.classList.contains('active')) {
                        content.style.visibility = 'hidden';
                        content.style.padding = '0 1.5rem'; // æ¨ªãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¯ä¿æŒ
                    }
                }, ACCORDION_ANIMATION_DURATION);
            }

            // --- Admin Panel ---
            function toggleAdminPanel() {
                const isHidden = adminPanel.classList.toggle('hidden');
                // ARIAå±æ€§ã‚’æ›´æ–°
                adminPanelToggleLink.setAttribute('aria-expanded', String(!isHidden));
                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç† (ãƒ‘ãƒãƒ«è¡¨ç¤ºæ™‚ã«æœ€åˆã®å…¥åŠ›è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹)
                if (!isHidden) {
                    const firstInput = adminPanel.querySelector('input[type="number"], button');
                    firstInput?.focus();
                }
            }

            function initializeAdminPanel() {
                weightControlsContainer.innerHTML = ''; // ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¯ãƒªã‚¢
                const fragment = document.createDocumentFragment();

                options.forEach((option, index) => {
                    const controlDiv = document.createElement('div');
                    controlDiv.classList.add('weight-control');

                    const label = document.createElement('label');
                    // inputã«IDã‚’ä»˜ä¸ã—ã€labelã®forå±æ€§ã¨é–¢é€£ä»˜ã‘ã‚‹
                    const inputId = `weight-${index}`;
                    label.htmlFor = inputId;
                    // labelã®ãƒ†ã‚­ã‚¹ãƒˆã‚’æ§‹ç¯‰
                    const labelText = document.createTextNode(`${option} ã®ç¢ºç‡é‡ã¿: `);
                    label.appendChild(labelText);

                    const input = document.createElement('input');
                    input.type = 'number';
                    input.id = inputId;
                    input.min = '0';
                    input.step = '0.1'; // 0.1åˆ»ã¿
                    input.value = optionWeights[index].toFixed(1); // å°æ•°ç‚¹ä¸€æ¡ã¾ã§è¡¨ç¤º
                    input.dataset.index = index; // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿æŒ

                    const probabilitySpan = document.createElement('span');
                    probabilitySpan.classList.add('probability');
                    probabilitySpan.textContent = `ç´„ ${calculateProbability(index)}%`; // åˆæœŸç¢ºç‡

                    label.appendChild(input); // inputã‚’labelå†…ã«å…¥ã‚Œã‚‹ã¨ã‚¯ãƒªãƒƒã‚¯ç¯„å›²ãŒåºƒãŒã‚‹
                    controlDiv.appendChild(label);
                    controlDiv.appendChild(probabilitySpan); // ç¢ºç‡è¡¨ç¤ºã¯labelã®å¤–
                    fragment.appendChild(controlDiv);
                });
                weightControlsContainer.appendChild(fragment);
                // åˆæœŸç¢ºç‡è¡¨ç¤ºã‚’æ›´æ–°
                updateProbabilityDisplays();
            }


            function handleWeightInputChange(event) {
                const input = event.target;
                if (input.type === 'number' && input.dataset.index != null) { // nullãƒã‚§ãƒƒã‚¯è¿½åŠ 
                    const index = parseInt(input.dataset.index, 10);
                    const newWeight = parseFloat(input.value);

                    if (!isNaN(newWeight) && newWeight >= 0) {
                        updateOptionWeight(index, newWeight);
                        updateProbabilityDisplays(); // å…¨ã¦ã®ç¢ºç‡è¡¨ç¤ºã‚’æ›´æ–°
                    } else if (input.value === '') {
                        // ç©ºã®å ´åˆã¯ 0 ã¨ã—ã¦æ‰±ã† (ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼è¡¨ç¤º)
                        updateOptionWeight(index, 0);
                        updateProbabilityDisplays();
                    } else {
                        // ä¸æ­£ãªå€¤ã®å ´åˆã¯å…ƒã®å€¤ã«æˆ»ã™ or ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
                        console.warn(`Invalid weight input: ${input.value}`);
                        input.value = optionWeights[index].toFixed(1); // å…ƒã®å€¤ã«æˆ»ã™
                    }
                }
            }

            function updateProbabilityDisplays() {
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0); // åˆè¨ˆã‚’å†è¨ˆç®—
                options.forEach((_, index) => {
                    const probabilitySpan = weightControlsContainer.querySelector(`#weight-${index}`)?.closest('.weight-control')?.querySelector('.probability');
                    if (probabilitySpan) {
                        probabilitySpan.textContent = `ç´„ ${calculateProbability(index)}%`;
                    }
                });
            }

            function calculateProbability(index) {
                // totalWeightãŒ0ã¾ãŸã¯è² ã®å ´åˆã®ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’å‡¦ç†
                if (totalWeight <= 0 || optionWeights[index] <= 0) return '0.0';
                return ((optionWeights[index] / totalWeight) * 100).toFixed(1);
            }

            function saveWeightsToStorage() {
                try {
                    // ä¿å­˜å‰ã«é‡ã¿ãŒæ•°å€¤ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª (å¿µã®ãŸã‚)
                    const validWeights = optionWeights.map(w => (typeof w === 'number' && w >= 0) ? w : DEFAULT_WEIGHT);
                    localStorage.setItem(ADMIN_PANEL_STORAGE_KEY, JSON.stringify(validWeights));
                } catch (error) {
                    console.error("Failed to save weights to localStorage:", error);
                    alert('è¨­å®šã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚localStorageãŒåˆ©ç”¨ã§ããªã„ã‹ã€å®¹é‡åˆ¶é™ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                }
            }

            function loadWeightsFromStorage() {
                try {
                    const savedWeights = localStorage.getItem(ADMIN_PANEL_STORAGE_KEY);
                    if (savedWeights) {
                        const parsedWeights = JSON.parse(savedWeights);
                        // é…åˆ—ã§ã‚ã‚Šã€è¦ç´ æ•°ãŒä¸€è‡´ã—ã€å…¨ã¦ã®è¦ç´ ãŒ0ä»¥ä¸Šã®æ•°å€¤ã‹æ¤œè¨¼
                        if (Array.isArray(parsedWeights) &&
                            parsedWeights.length === options.length &&
                            parsedWeights.every(w => typeof w === 'number' && w >= 0)) {
                            optionWeights = parsedWeights;
                        } else {
                            console.warn("Invalid or corrupted weight data found in localStorage. Using default weights.");
                            resetWeightsInternal(); // ä¸æ­£ãªã‚‰ãƒªã‚»ãƒƒãƒˆ
                            localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY); // ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ã¯å‰Šé™¤
                        }
                    }
                } catch (error) {
                    console.error("Failed to parse weights from localStorage:", error);
                    resetWeightsInternal(); // ãƒ‘ãƒ¼ã‚¹å¤±æ•—æ™‚ã‚‚ãƒªã‚»ãƒƒãƒˆ
                    localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY);
                }
                // æœ€å¾Œã«åˆè¨ˆã‚’è¨ˆç®—
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0);
            }


            function resetWeightsInternal() {
                optionWeights = options.map(() => DEFAULT_WEIGHT);
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0);
            }

            function resetWeights() {
                if (confirm('ç¢ºç‡è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆå…¨ã¦å‡ç­‰ï¼‰ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿä¿å­˜ã•ã‚Œã¦ã„ã‚‹è¨­å®šã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚')) {
                    resetWeightsInternal();
                    // Adminãƒ‘ãƒãƒ«ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚‚ãƒªã‚»ãƒƒãƒˆ
                    options.forEach((_, index) => {
                        const input = document.getElementById(`weight-${index}`);
                        if (input) input.value = DEFAULT_WEIGHT.toFixed(1);
                    });
                    updateProbabilityDisplays();
                    localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY); // ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
                    alert('è¨­å®šãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚');
                }
            }

            // --- Intersection Observer ---
            function setupIntersectionObserver() {
                // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°: è¦ç´ ãŒäº¤å·®ã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹
                const observerCallback = (entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã«å…¥ã£ãŸã‚‰ visible ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
                            entry.target.classList.add('visible');
                            // ä¸€åº¦è¡¨ç¤ºã—ãŸã‚‰ç›£è¦–ã‚’è§£é™¤ (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¹°ã‚Šè¿”ã•ãªã„å ´åˆ)
                            observer.unobserve(entry.target);
                        }
                    });
                };

                // ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
                const observer = new IntersectionObserver(observerCallback, INTERSECTION_OBSERVER_OPTIONS);

                // .target ã‚¯ãƒ©ã‚¹ã‚’æŒã¤ã™ã¹ã¦ã®è¦ç´ ã‚’ç›£è¦–å¯¾è±¡ã«è¿½åŠ 
                const targets = document.querySelectorAll('.target');
                targets.forEach(target => observer.observe(target));
            }

            // --- åˆæœŸåŒ–å®Ÿè¡Œ ---
            // DOMContentLoaded ã‚’å¾…ã£ã¦åˆæœŸåŒ–ã‚’å®Ÿè¡Œ
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initialize);
            } else {
                // ã™ã§ã« DOM ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯å³æ™‚å®Ÿè¡Œ
                initialize();
            }

        })(); // IIFE çµ‚äº†
    </script>
</body>

</html>
